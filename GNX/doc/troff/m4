.ig
	m4: version 1.2 of 11/29/83
	

	@(#)m4	1.2	(NSC)	11/29/83
..
.tr |
.mh
Hyphenation.
.pg
The automatic hyphenation may be switched off and on.
When switched on with \f3hy\f1,
several variants may be set.
A \f2hyphenation indicator\f1 character may be imbedded in a word to
specify desired hyphenation points,
or may be prepended to suppress hyphenation.
In addition,
the user may specify a small exception word list.
.pg
Only words that consist of a central alphabetic string
surrounded by (usually null) non-alphabetic strings
are considered candidates for automatic hyphenation.
Words that were input containing hyphens
(minus),
em-dashes (\f3\e(em\f1),
or hyphenation indicator characters\
\(emsuch as mother-in-law\(em\
are \f2always\f1 subject to splitting after those characters,
whether or not automatic hyphenation is on or off.
.h1
.bt
\f3&nh\f1	hyphenate	-	E	\
Automatic hyphenation is turned off.
.bt
\f3&hy\f2N\f1	on,\f2N=\f11	on,\f2N=\f11	E	\
Automatic hyphenation is turned on
for \f2N\f1\|\(>=1, or off for \f2N=\f1\|0.
If \f2N=\f1\|2, \f2last\f1 lines (ones that will cause a trap)
are not hyphenated.
For \f2N=\f1\|4 and 8, the last and first two characters
respectively of a word are not split off.
These values are additive;
i.|e. \f2N=\f1\|14 will invoke all three restrictions.
.bt
\f3&hc\f2|c\f1	\f3\e%	\e%\f1	E	Hyphenation indicator character is set
to \f2c\f1 or to the default \f3\e%\f1.
The indicator does not appear in the output.
.bt
\f3&hw\f2|word1|...\f1	ignored	-	Specify hyphenation points in words
with imbedded minus signs.
Versions of a word with terminal \f2s\f1 are implied;
i.|e. \f2dig\-it\f1 implies \f2dig\-its\f1.
This list is examined initially \f2and\f1 after
each suffix stripping.
The space available is small\(emabout 128 characters.
.mh
Three Part Titles.
.pg
The titling function \f3tl\f1 provides for automatic placement
of three fields at the left, center, and right of a line
with a title-length
specifiable with \f3lt\f1.
\f3tl\f1 may be used anywhere, and is independent of the
normal text collecting process.
A common use is in header and footer macros.
.h1
.bt
\f3&tl\f2|\'left\|\'center\|\'right\|\'\f1	-	-	\
The strings \f2left\f1, \f2center\f1, and \f2right\f1 are
respectively left-adjusted, centered, and right-adjusted
in the current title-length.
Any of the strings may be empty,
and overlapping is permitted.
If the page-number character (initially \f3%\f1) is found within any of the fields it is replaced
by the current page number having the format assigned to register \f3%\f1.
Any character may be used as the string delimiter.
.bt
\f3&pc\f2|c\f1	\f3%\f1	off	-	The page number character is set to \f2c\f1,
or removed.
The page-number register remains \f3%\f1.
.bt
\f3&lt\f2|\(+-N\f1	6.5\|in	previous	E,\f3m\f1	Length of title set to \f2\(+-N\f1.
The line-length and the title-length are \f2independent\f1.
Indents do not apply to titles; page-offsets do.
.mh
Output Line Numbering.
.pg
.ll -\w'0000'u
.nm 1 3
Automatic sequence numbering of output lines may be
requested with \f3nm\f1.
When in effect,
a three-digit, arabic number plus a digit-space
is prepended to output text lines.
The text lines are thus offset by four digit-spaces,
and otherwise retain their line length;
a reduction in line length may be desired to keep the right margin
aligned with an earlier margin.
Blank lines, other vertical spaces, and lines generated by \f3tl\f1
are \f2not\f1 numbered.
Numbering can be temporarily suspended with \f3nn\f1,
or with an \f3.nm\f1 followed by a later \f3.nm|+0\f1.
In addition,
a line number indent \f2I\f1, and the number-text separation \f2S\f1
may be specified in digit-spaces.
Further, it can be specified that only those line numbers that are
multiples of some number \f2M\f1 are to be printed (the others will appear
as blank number fields).
.br
.nm
.ll
.h1
.bt
\f3&nm\f2|\(+-N|M|S|I\f1	off	E		\
Line number mode.
If \f2\(+-N\f1 is given,
line numbering is turned on,
and the next output line numbered is numbered \f2\(+-N\f1.
Default values are \f2M=\f1\|1, \f2S=\f1\|1, and \f2I=\f1\|0.
Parameters corresponding to missing arguments are unaffected;
a non-numeric argument is considered missing.
In the absence of all arguments, numbering is turned off;
the next line number is preserved for possible further use
in number register \f3ln\f1.
.bt
\f3&nn\f2|N\f1	-	\f2N=\f11	E	The next \f2N\f1 text output lines are not
numbered.
.pg
.ll -\w'0000'u
.nm +0
As an example, the paragraph portions of this section
are numbered with \f2M=\f1\|3:
\&\f3.nm|1|3\f1 was placed at the beginning;
\&\f3.nm\f1 was placed at the end of the first paragraph;
and \f3.nm|+0\f1 was placed in front of this paragraph;
and \f3.nm\f1 finally placed at the end.
Line lengths were also changed (by \f3\ew\'0000\'u\f1) to keep the right side aligned.
Another example is
\&\f3.nm|+5|5|x|3\f1 which turns on numbering with the line number of the next
line to be 5 greater than the last numbered line,
with \f2M=\f1\|5, with spacing \f2S\f1 untouched, and with the indent \f2I\f1 set to 3.
.br
.ll
.nm
.mh
Conditional Acceptance of Input
.pg
In the following,
\f2c\f1 is a one-character, built-in \f2condition\f1 name,
\f3!\f1 signifies \f2not\f1,
\f2N\f1 is a numerical expression,
\f2string1\f1 and \f2string2\f1 are strings delimited by any non-blank, non-numeric character \f2not\f1 in the strings,
and
\f2anything\f1 represents what is conditionally accepted.
.h1
.bt
\f3&if\f2|c|anything\f1		-	-	If condition \f2c\f1 true, accept \f2anything\f1 as input;
in multi-line case use \f2\e{anything\|\e}\f1.
.bt
\f3&if|!\f2c|anything\f1	-	-		If condition \f2c\f1 false, accept \f2anything\f1.
.bt
\f3&if\f2|N|anything\f1	-	\f3u\f1		If expression \f2N\f1 > 0, accept \f2anything\f1.
.bt
\f3&if|!\f2N|anything\f1	-	\f3u\f1		If expression \f2N\f1 \(<= 0, accept \f2anything\f1.
.bt
\f3&if\f2|\|\'string1\|\'string2\|\'|anything\f1	-	If \f2string1\f1 identical to \f2string2\f1,
accept \f2anything\f1.
.bt
\f3&if|!\f2\|\'string1\|\'string2\|\'|anything\f1	-	If \f2string1\f1 not identical to \f2string2\f1,
accept \f2anything\f1.
.bt
\f3&ie\f2|c|anything\f1	-	\f3u\f1		If portion of if-else; all above forms (like \f3if\f1).
.bt
\f3&el\f2|anything\f1		-	-	Else portion of if-else.
.pg
The built-in condition names are:
.TS
center box;
c2|c2
c2|c2
c2|l2.
Condition
Name	True If
_
\f3o\f1	Current page number is odd
\f3e\f1	Current page number is even
\f3t\f1	Formatter is \*(TR
\f3n\f1	Formatter is \*(NR
.TE
If the condition \f2c\f1 is \f2true\f1, or if the number \f2N\f1 is greater than zero,
or if the strings compare identically (including motions and character size and font),
\f2anything\f1 is accepted as input.
If a \f3!\f1 precedes the condition, number, or string comparison,
the sense of the acceptance is reversed.
.pg
Any spaces between the condition and the beginning of \f2anything\f1 are skipped over.
The \f2anything\f1 can be either a single input line (text, macro, or whatever)
or a number of input lines.
In the multi-line case,
the first line must begin with a left delimiter \f3\e{\f1 and
the last line must end with a right delimiter \f3\e}\f1.
.pg
The request \f3ie\f1 (if-else) is identical to \f3if\f1
except that the acceptance state is remembered.
A subsequent and matching \f3el\f1 (else) request then uses the reverse sense of that state.
\f3ie\f1|-|\f3el\f1 pairs may be nested.
.pg
Some examples are:
.x1
.ft3
.ne 1
&if e .tl \'\|Even Page %\'\'\'
.ft1
.x2
which outputs a title if the page number is even; and
.x1
.ft3
.ne 3.1
&ie \en%>1 \e{\e
\&\'sp 0.5i
&tl \'\|Page %\'\'\'
\&\'sp ~\|1.2i|\e}
&el .sp ~\|2.5i
.ft1
.x2
which treats page 1 differently from other pages.
.mh
Environment Switching.
.pg
A number of the parameters that
control the text processing are gathered together into an
\f2environment\f1, which can be switched by the user.
The environment parameters are those associated
with requests noting E in their \f2Notes\f1 column;
in addition, partially collected lines and words are in the environment.
Everything else is global; examples are page-oriented parameters,
diversion-oriented parameters, number registers, and macro and string definitions.
All environments are initialized with default parameter values.
.h1
.bt
\f3&ev\f2|N\f1	\f2N=\f10	previous	-	Environment switched to
environment 0\(<=\f2N\f1\(<=2.
Switching is done in push-down fashion so that
restoring a previous environment \f2must\f1 be done with \f3.ev\f1
rather than specific reference.
.mh
Insertions from the Standard Input
.pg
The input can be temporarily switched to the system \f2standard input\f1
with \f3rd\f1,
which will switch back when \f2two\f1 newlines
in a row are found (the \f2extra\f1 blank line is not used).
This mechanism is intended for insertions in form-letter-like documentation.
On \s-1UNIX\s+1, the \f2standard input\f1 can be the user's keyboard,
a \f2pipe\f1, or a \f2file\f1.
.h1
.bt
\f3&rd\f2|prompt\f1	-	\f2prompt=\f1\s-1BEL\s+1	\
Read insertion from the standard input until two newlines in a row are found.
If the standard input is the user's keyboard, \f2prompt\f1 (or a \s-1BEL\s+1)
is written onto the user's terminal.
\f3rd\f1 behaves like a macro,
and arguments may be placed after \f2prompt\f1.
.bt
\f3&ex\f1	-	-	-	Exit from \*(NR\(sl\*(TR.
Text processing is terminated exactly as if all input had ended.
.pg
If insertions are to be
taken from the terminal keyboard \f2while\f1 output is being printed
on the terminal, the command line option \f3\-q\f1 will turn off the echoing
of keyboard input and prompt only with \s-1BEL\s+1.
The regular input and insertion input \f2cannot\f1
simultaneously come from the standard input.
.pg
As an example,
multiple copies of a form letter may be prepared by entering the insertions
for all the copies in one file to be used as the standard input,
and causing the file containing the letter to reinvoke itself using \f3nx\f1 (\(sc19);
the process would ultimately be ended by an \f3ex\f1 in the insertion file.
.mh
Input\(slOutput File Switching
.h1
.bt
\f3&so\f2|filename\f1		-	-	Switch source file.
The top input (file reading) level is switched to \f2filename\f1.
The effect of an \f3so\f1 encountered in a macro
is not felt until the input level returns to the file level.
When the new file ends,
input is again taken from the original file.
\f3so\f1's may be nested.
.bt
\f3&nx\f2|filename\f1		end-of-file	-	Next file is \f2filename\f1.
The current file is considered ended, and the input is immediately switched
to \f2filename\f1.
.bt
\f3&pi\f2|program\f1		-	-	Pipe output to \f2program\f1 (\*(NR only).
This request must occur \f2before\f1 any printing occurs.
No arguments are transmitted to \f2program\f1.
.mh
Miscellaneous
.pg
.h1
.bt
.mc \s12\(br\s0
\f3&mc\f2|c|N\f1	-	off	E,\f3m\f1	\
Specifies that a \f2margin\f1 character \f2c\f1 appear a distance
\f2N\f1 to the right of the right margin
after each non-empty text line (except those produced by \f3tl\f1).
If the output line is too-long (as can happen in nofill mode)
the character will be appended to the line.
If \f2N\f1 is not given, the previous \f2N\f1 is used; the initial \f2N\f1 is
0.2|inches in \*(NR and 1\|em in \*(TR.
The margin character used with this paragraph was a 12-point box-rule.
.br
.mc
.bt
\f3&tm\f2|string\f1	-	newline	-	\
After skipping initial blanks, \f2string\f1 (rest of the line) is read in \f2copy mode\f1
and written on the user's terminal.
.bt
\f3&ig\f2|yy\f1	-	\f2.yy=\f3..\f1	-	Ignore \
input lines.
\f3ig\f1 behaves exactly like \f3de\f1 (\(sc7) except that the
input is discarded.
The input is read in \f2copy mode\f1, and any auto-incremented
registers will be affected.
.bt
\f3&pm\f2|t\f1	-	all	-	\
Print macros.
The names and sizes of all of the defined macros and strings are printed
on the user's terminal;
if \f2t\f1 is given, only the total of the sizes is printed.
The sizes is given in \f2blocks\f1
of 128 characters.
.bt
.lg 0
\f3&fl\f1	-	-	B	\c
.lg 0
Flush output buffer.
Used in interactive debugging to force output.
.mh
Output and Error Messages.
.pg
The output from \f3tm\f1, \f3pm\f1, and the prompt from \f3rd\f1,
as well as various \f2error\f1 messages are written onto
\s-1UNIX\s+1's \f2standard message\f1 output.
The latter is different from the \f2standard output\f1,
where \*(NR formatted output goes.
By default, both are written onto the user's terminal,
but they can be independently redirected.
.pg
Various \f2error\f1 conditions may occur during
the operation of \*(NR and \*(TR.
Certain less serious errors having only local impact do not
cause processing to terminate.
Two examples are \f2word overflow\f1, caused by a word that is too large
to fit into the word buffer (in fill mode), and
\f2line overflow\f1, caused by an output line that grew too large
to fit in the line buffer;
in both cases, a message is printed, the offending excess
is discarded,
and the affected word or line is marked at the point of truncation
with a \(** in \*(NR and a \(lh in \*(TR.
The philosophy is to continue processing, if possible,
on the grounds that output useful for debugging may be produced.
If a serious error occurs, processing terminates,
and an appropriate message is printed.
Examples are the inability to create, read, or write files,
and the exceeding of certain internal limits that
make future output unlikely to be useful.
.pg
.bp
